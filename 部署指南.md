# æ–‡åŒ–é—äº§ç®¡ç†ç³»ç»Ÿ - éƒ¨ç½²æŒ‡å—

## ğŸš€ éƒ¨ç½²æ–¹å¼é€‰æ‹©

### æ–¹å¼ä¸€ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰
æœ€ç®€å•çš„æ–¹å¼ï¼Œåªéœ€è¦Dockerç¯å¢ƒå³å¯ã€‚

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒéƒ¨ç½²
é€‚åˆå¼€å‘äººå‘˜ï¼Œéœ€è¦å®‰è£…Javaã€Node.jsç­‰å¼€å‘ç¯å¢ƒã€‚

### æ–¹å¼ä¸‰ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
é€‚åˆæ­£å¼éƒ¨ç½²ï¼Œä½¿ç”¨Docker Composeè¿›è¡Œå®¹å™¨ç¼–æ’ã€‚

---

## ğŸ“‹ æ–¹å¼ä¸€ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

### å‰ç½®è¦æ±‚
- Docker Desktop æˆ– Docker Engine
- 8GB+ å†…å­˜
- 10GB+ ç£ç›˜ç©ºé—´

### éƒ¨ç½²æ­¥éª¤

#### 1. ä¸‹è½½é¡¹ç›®
```bash
# å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœæœ‰Gitä»“åº“ï¼‰
git clone <é¡¹ç›®åœ°å€>
cd cultural-heritage-system

# æˆ–è€…ç›´æ¥ä¸‹è½½é¡¹ç›®æ–‡ä»¶
# å°†æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹å‘é€ç»™å…¶ä»–äºº
```

#### 2. å¯åŠ¨æœåŠ¡
```bash
# ä½¿ç”¨Docker Composeå¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose -f docker-compose.simple.yml up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.simple.yml ps
```

#### 3. è®¿é—®ç³»ç»Ÿ
- å‰ç«¯åœ°å€ï¼šhttp://localhost:5173
- åç«¯APIï¼šhttp://localhost:8080/api
- æ•°æ®åº“ï¼šlocalhost:3306

#### 4. é»˜è®¤è´¦æˆ·
- ç®¡ç†å‘˜ï¼šadmin / admin123
- æ™®é€šç”¨æˆ·ï¼šuser1 / user123

---

## ğŸ“‹ æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒéƒ¨ç½²

### å‰ç½®è¦æ±‚
- Java 11+
- Node.js 16+
- MySQL 8.0+
- Redis 6.0+
- Maven 3.6+

### éƒ¨ç½²æ­¥éª¤

#### 1. æ•°æ®åº“åˆå§‹åŒ–
```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE cultural_heritage CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- åˆ›å»ºç”¨æˆ·
CREATE USER 'heritage_user'@'%' IDENTIFIED BY 'heritage123';
GRANT ALL PRIVILEGES ON cultural_heritage.* TO 'heritage_user'@'%';
FLUSH PRIVILEGES;
```

#### 2. å¯¼å…¥æ•°æ®åº“ç»“æ„
```bash
# å¯¼å…¥SQLæ–‡ä»¶
mysql -u heritage_user -p cultural_heritage < database/init.sql
```

#### 3. å¯åŠ¨åç«¯
```bash
cd backend
mvn clean package -DskipTests
java -jar target/cultural-heritage-backend.jar
```

#### 4. å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm install
npm run dev
```

---

## ğŸ“‹ æ–¹å¼ä¸‰ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### ä½¿ç”¨Docker Composeï¼ˆæ¨èï¼‰

#### 1. åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®
```yaml
# docker-compose.prod.yml
version: '3.8'
services:
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: cultural_heritage
      MYSQL_USER: heritage_user
      MYSQL_PASSWORD: heritage123
    volumes:
      - mysql_data:/var/lib/mysql
      - ./database/init.sql:/docker-entrypoint-initdb.d/init.sql
    ports:
      - "3306:3306"

  redis:
    image: redis:6.2-alpine
    ports:
      - "6379:6379"

  backend:
    build: ./backend
    environment:
      SPRING_PROFILES_ACTIVE: prod
    ports:
      - "8080:8080"
    depends_on:
      - mysql
      - redis

  frontend:
    build: ./frontend
    ports:
      - "80:80"
    depends_on:
      - backend

volumes:
  mysql_data:
```

#### 2. å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
```bash
docker-compose -f docker-compose.prod.yml up -d
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=cultural_heritage
DB_USER=heritage_user
DB_PASSWORD=heritage123

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379

# JWTé…ç½®
JWT_SECRET=your-secret-key
JWT_EXPIRATION=604800
```

### ç«¯å£é…ç½®
- å‰ç«¯ï¼š5173 (å¼€å‘) / 80 (ç”Ÿäº§)
- åç«¯ï¼š8080
- æ•°æ®åº“ï¼š3306
- Redisï¼š6379

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²è„šæœ¬

### ä¸€é”®éƒ¨ç½²è„šæœ¬
```bash
#!/bin/bash
# deploy.sh

echo "ğŸš€ å¼€å§‹éƒ¨ç½²æ–‡åŒ–é—äº§ç®¡ç†ç³»ç»Ÿ..."

# æ£€æŸ¥Dockeræ˜¯å¦å®‰è£…
if ! command -v docker &> /dev/null; then
    echo "âŒ Dockeræœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…Docker"
    exit 1
fi

# æ£€æŸ¥Docker Composeæ˜¯å¦å®‰è£…
if ! command -v docker-compose &> /dev/null; then
    echo "âŒ Docker Composeæœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…Docker Compose"
    exit 1
fi

# å¯åŠ¨æœåŠ¡
echo "ğŸ“¦ å¯åŠ¨æœåŠ¡..."
docker-compose -f docker-compose.simple.yml up -d

# ç­‰å¾…æœåŠ¡å¯åŠ¨
echo "â³ ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 30

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
echo "ğŸ” æ£€æŸ¥æœåŠ¡çŠ¶æ€..."
docker-compose -f docker-compose.simple.yml ps

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo "ğŸŒ å‰ç«¯åœ°å€: http://localhost:5173"
echo "ğŸ”§ åç«¯API: http://localhost:8080/api"
echo "ğŸ‘¤ ç®¡ç†å‘˜è´¦æˆ·: admin / admin123"
```

---

## ğŸ“¦ é¡¹ç›®æ‰“åŒ…åˆ†å‘

### åˆ›å»ºéƒ¨ç½²åŒ…
```bash
# åˆ›å»ºéƒ¨ç½²åŒ…
tar -czf cultural-heritage-system.tar.gz \
  --exclude=node_modules \
  --exclude=target \
  --exclude=.git \
  cultural-heritage-system/

# æˆ–è€…ä½¿ç”¨zip
zip -r cultural-heritage-system.zip cultural-heritage-system/ \
  -x "*/node_modules/*" "*/target/*" "*/.git/*"
```

### éƒ¨ç½²åŒ…å†…å®¹
```
cultural-heritage-system/
â”œâ”€â”€ docker-compose.simple.yml    # Dockerç¼–æ’æ–‡ä»¶
â”œâ”€â”€ backend/                     # åç«¯ä»£ç 
â”œâ”€â”€ frontend/                    # å‰ç«¯ä»£ç 
â”œâ”€â”€ database/                    # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ éƒ¨ç½²æŒ‡å—.md                  # éƒ¨ç½²è¯´æ˜
â”œâ”€â”€ deploy.sh                    # ä¸€é”®éƒ¨ç½²è„šæœ¬
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
```

---

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç«¯å£å†²çª
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep :5173
netstat -tulpn | grep :8080

# ä¿®æ”¹ç«¯å£
# ç¼–è¾‘ docker-compose.simple.yml ä¸­çš„ç«¯å£æ˜ å°„
```

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
docker-compose logs mysql

# é‡å¯æ•°æ®åº“
docker-compose restart mysql
```

#### 3. å‰ç«¯æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥å‰ç«¯æœåŠ¡
docker-compose logs frontend

# é‡å¯å‰ç«¯æœåŠ¡
docker-compose restart frontend
```

#### 4. æƒé™é—®é¢˜
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# ç»™Dockeræƒé™
sudo usermod -aG docker $USER
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. æ“ä½œç³»ç»Ÿç‰ˆæœ¬
2. Dockerç‰ˆæœ¬
3. é”™è¯¯æ—¥å¿—
4. éƒ¨ç½²æ–¹å¼

è”ç³»æ–¹å¼ï¼š
- é‚®ç®±ï¼šsupport@heritage.com
- æ–‡æ¡£ï¼šæŸ¥çœ‹é¡¹ç›®README.md
