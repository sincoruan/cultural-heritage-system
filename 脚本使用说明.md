# æ–‡åŒ–é—äº§ç®¡ç†ç³»ç»Ÿ - è„šæœ¬ä½¿ç”¨è¯´æ˜

## ğŸ“‹ å¯ç”¨è„šæœ¬

### ğŸš€ éƒ¨ç½²è„šæœ¬

#### 1. `deploy.sh` - ä¸€é”®éƒ¨ç½²
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy.sh
```

**åŠŸèƒ½**ï¼š
- æ£€æŸ¥Dockerç¯å¢ƒ
- æ£€æŸ¥ç³»ç»Ÿèµ„æº
- åœæ­¢ç°æœ‰æœåŠ¡
- å¯åŠ¨æ‰€æœ‰æœåŠ¡
- ç­‰å¾…æœåŠ¡å°±ç»ª
- æ£€æŸ¥æœåŠ¡çŠ¶æ€
- æ˜¾ç¤ºè®¿é—®ä¿¡æ¯

#### 2. `start.sh` - å¿«é€Ÿå¯åŠ¨
```bash
chmod +x start.sh
./start.sh
```

**åŠŸèƒ½**ï¼š
- å¿«é€Ÿå¯åŠ¨æ‰€æœ‰æœåŠ¡
- é€‚ç”¨äºå·²éƒ¨ç½²è¿‡çš„ç³»ç»Ÿ

### ğŸ›‘ åœæ­¢è„šæœ¬

#### 1. `stop.sh` - å¿«é€Ÿåœæ­¢
```bash
chmod +x stop.sh
./stop.sh
```

**åŠŸèƒ½**ï¼š
- åœæ­¢æ‰€æœ‰æœåŠ¡
- ä¿ç•™æ•°æ®å’Œé…ç½®
- é€‚ç”¨äºä¸´æ—¶åœæ­¢

#### 2. `undeploy.sh` - å®Œå…¨å¸è½½
```bash
chmod +x undeploy.sh
./undeploy.sh
```

**åŠŸèƒ½**ï¼š
- åœæ­¢æ‰€æœ‰æœåŠ¡
- åˆ é™¤å®¹å™¨å’Œé•œåƒ
- æ¸…ç†æ•°æ®å·ï¼ˆå¯é€‰ï¼‰
- æ¸…ç†ç½‘ç»œ
- æ¸…ç†ä¸Šä¼ æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
- æ¸…ç†æ—¥å¿—æ–‡ä»¶

## ğŸ”§ æ‰‹åŠ¨ç®¡ç†å‘½ä»¤

### Docker Compose å‘½ä»¤
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.simple.yml ps

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.simple.yml logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.simple.yml logs backend
docker-compose -f docker-compose.simple.yml logs frontend
docker-compose -f docker-compose.simple.yml logs mysql

# åœæ­¢æœåŠ¡
docker-compose -f docker-compose.simple.yml down

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.simple.yml restart

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose -f docker-compose.simple.yml restart backend

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose -f docker-compose.simple.yml up -d --build
```

### Docker å‘½ä»¤
```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨
docker ps -a

# æŸ¥çœ‹æ‰€æœ‰é•œåƒ
docker images

# æŸ¥çœ‹æ•°æ®å·
docker volume ls

# æŸ¥çœ‹ç½‘ç»œ
docker network ls

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune

# æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æºï¼ˆåŒ…æ‹¬æ•°æ®å·ï¼‰
docker system prune -a --volumes
```

## ğŸ“Š æœåŠ¡çŠ¶æ€æ£€æŸ¥

### æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
```bash
# æ£€æŸ¥å‰ç«¯
curl http://localhost:5173

# æ£€æŸ¥åç«¯API
curl http://localhost:8080/api/api/heritage/list?page=0&size=1

# æ£€æŸ¥æ•°æ®åº“
docker-compose -f docker-compose.simple.yml exec mysql mysql -u heritage_user -pheritage123 -e "SELECT 1;"
```

## ğŸ—‚ï¸ æ–‡ä»¶ç»“æ„

```
cultural-heritage-system/
â”œâ”€â”€ deploy.sh                    # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ start.sh                     # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop.sh                      # å¿«é€Ÿåœæ­¢è„šæœ¬
â”œâ”€â”€ undeploy.sh                  # å®Œå…¨å¸è½½è„šæœ¬
â”œâ”€â”€ docker-compose.simple.yml    # Dockerç¼–æ’æ–‡ä»¶
â”œâ”€â”€ backend/                     # åç«¯ä»£ç 
â”œâ”€â”€ frontend/                    # å‰ç«¯ä»£ç 
â”œâ”€â”€ database/                    # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ uploads/                     # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”œâ”€â”€ logs/                        # æ—¥å¿—æ–‡ä»¶ç›®å½•
â””â”€â”€ è„šæœ¬ä½¿ç”¨è¯´æ˜.md              # æœ¬æ–‡ä»¶
```

## ğŸš¨ æ³¨æ„äº‹é¡¹

### æ•°æ®å®‰å…¨
- `undeploy.sh` ä¼šè¯¢é—®æ˜¯å¦åˆ é™¤æ•°æ®å·å’Œä¸Šä¼ æ–‡ä»¶
- å»ºè®®åœ¨åˆ é™¤å‰å¤‡ä»½é‡è¦æ•°æ®
- ç”Ÿäº§ç¯å¢ƒè¯·è°¨æ…ä½¿ç”¨å¸è½½è„šæœ¬

### æƒé™é—®é¢˜
- ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™ï¼š`chmod +x *.sh`
- ç¡®ä¿Dockeræœ‰è¶³å¤Ÿæƒé™è¿è¡Œ

### ç«¯å£å†²çª
- ç¡®ä¿ç«¯å£ 5173ã€8080ã€3306ã€6379 æœªè¢«å ç”¨
- å¦‚æœ‰å†²çªï¼Œå¯ä¿®æ”¹ `docker-compose.simple.yml` ä¸­çš„ç«¯å£æ˜ å°„

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç«¯å£è¢«å ç”¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep :5173
netstat -tulpn | grep :8080

# ä¿®æ”¹ç«¯å£ï¼ˆç¼–è¾‘ docker-compose.simple.ymlï¼‰
```

#### 2. æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose -f docker-compose.simple.yml logs

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.simple.yml restart
```

#### 3. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
docker-compose -f docker-compose.simple.yml logs mysql

# é‡å¯æ•°æ®åº“
docker-compose -f docker-compose.simple.yml restart mysql
```

#### 4. æƒé™é—®é¢˜
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x *.sh

# ç»™Dockeræƒé™
sudo usermod -aG docker $USER
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
- æ“ä½œç³»ç»Ÿç‰ˆæœ¬
- Dockerç‰ˆæœ¬
- é”™è¯¯æ—¥å¿—
- å…·ä½“æ“ä½œæ­¥éª¤

---

**ğŸ‰ æ„Ÿè°¢ä½¿ç”¨æ–‡åŒ–é—äº§ç®¡ç†ç³»ç»Ÿï¼**

